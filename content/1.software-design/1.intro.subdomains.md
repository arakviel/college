# 1. Аналіз предметної області. Експертні знання та складність

колись інтегрую початкову частину із презентації...

## Модель предметної області

### Що таке модель?
Модель — це спрощене уявлення об’єкта або явища, в якому свідомо виділяються певні аспекти та ігноруються інші. Це абстракція, створена для конкретного використання.

**Ребекка Вірфс-Брок (Rebecca Wirfs-Brock)**

> Модель — це не копія реального світу, а конструкція, створена людиною, що допомагає зрозуміти системи реального світу.

Класичним прикладом моделі є карта. Наприклад, навігаційна карта, карта місцевості, карта метро — кожна з них показує лише ту інформацію, яка необхідна для її конкретного завдання.

![](/images/1.png)

### Ефективне моделювання
Кожна модель має свою мету, і ефективна модель включає лише ті деталі, які потрібні для її досягнення.

Наприклад:

- На карті світу не буде станцій метро.
- На карті метро неможливо оцінити географічні відстані.

Корисна модель — це не копія реального світу, а інструмент для вирішення конкретної задачі. Як сказав статистик Джордж Бокс:
> «Усі моделі є хибними, але деякі корисними».

Моделі допомагають зменшувати складність, опускаючи зайві деталі й залишаючи лише те, що необхідно. Проте погана абстракція може упустити важливі деталі або додати зайве, що створить проблеми.

Як зазначив Едсгер Дейкстра (Edsger W. Dijkstra):
> «Мета абстрагування — створення нового рівня семантики, де можна бути абсолютно точним».

### Моделювання предметної області
Створюючи єдину мову, ми фактично будуємо модель предметної області, яка повинна:

- відображати уявлення експертів про бізнес;
- включати об’єкти, їх поведінку, причинно-наслідкові зв’язки та інваріанти.

Модель не повинна охоплювати всі деталі. Вона має включати лише ті аспекти, які потрібні для реалізації конкретного програмного продукту.

Комунікація між розробниками та експертами є критично важливою. Недопрацювання у спілкуванні можуть призвести до серйозних помилок у продукті.

### Неперервна робота
Створення єдиної мови вимагає постійної взаємодії з експертами.

- Мова має використовуватись усіма зацікавленими сторонами на кожному етапі проекту.
- Її слід вдосконалювати у вимогах, тестах, документації та коді.
- Єдина мова — це динамічний процес.

Зміни у предметній області вимагають оновлення мови. Постійне використання мови дозволяє глибше зрозуміти суть предметної області.

### Інструменти для підтримки
Для управління та зберігання єдиної мови можна використовувати:

- **Глосарій (наприклад, на wiki-сторінках):**
  - Допомагає новим членам команди швидше адаптуватись.
  - Має оновлюватись всіма членами команди.

- **Сценарії використання або Gherkin-тести:**
  - Дозволяють фіксувати поведінку та бізнес-логіку.
  - Наприклад:

```ini
Сценарій: Повідомити агента про новий запит  
Дано: Користувач подає запит з текстом:  
«Мені потрібна допомога в налаштуванні AWS»  
Коли: Запит призначено містеру Вольфу  
Тоді: Агент отримує повідомлення про новий запит.
```

Інструменти статичного аналізу коду (наприклад, 'NDepend'): допомагають перевіряти використання термінів єдиної мови в коді.

Незважаючи на важливість інструментів, вони не замінять реального використання мови у повсякденній роботі.

## Складнощі в розробці єдиного мови

### Теоретичний підхід

Розробка єдиного мови (ubiquitous language) виглядає простою в теорії, але на практиці це може бути складніше. Успіх залежить від:

- **Спілкування з експертами** — вони є ключовими носіями знань про предметну область.
- **Виявлення невидимих знань** — часто важливі знання не задокументовані і не систематизовані, вони перебувають лише в свідомості експертів.

### Проблеми при зборі знань

Згодом, ви зрозумієте, що процес збору знань часто полягає не тільки в ідентифікації вже існуючих фактів, а й у **спільному створенні моделі** разом з експертами.

### Можливі проблеми:
- **Неясності у розумінні** — у самих експертів можуть бути прогалини в розумінні своєї бізнес-сфери.
- **Недостатність визначень** — концепції, які не мають чітких визначень.
- **Граничні випадки** — важливо враховувати всі можливі сценарії, а не лише позитивні.

### Взаємне навчання

Процес навчання в таких умовах є **взаємним** — ви допомагаєте експертам краще розуміти їхню предметну область. Це дозволяє:

- Виявити приховані невідповідності.
- Підвищити точність моделі.

### Впровадження в існуючий проект

Іноді предметна область вже описана наявним мовним апаратом в організації. Але цей мова може бути:

- **Технічним** — використання термінів типу "імена таблиць бази даних".
- **Неефективним** — він може не відображати суть предметної області, оскільки не слідує методології предметно-орієнтованого проектування.

#### Виклики:
- **Зміна існуючого мови** — це складний і довготривалий процес.
- **Терпіння** — важливо переконатися, що новий мова використовується у документації та коді.

### Як вибрати мову?

На питання, **яку мову вибрати** в неангломовній країні, моя порада:

- Використовуйте **англійські іменники** для позначення об'єктів предметної області. Це спростить застосування єдиної термінології в коді.

---

## Висновок

### Ключові ідеї:

1. **Ефективне спілкування** є основою для успішного створення програмного продукту.
2. **Єдиний мова** допомагає усунути розрив у знаннях між експертами та розробниками.

### Роль єдиної мови

- **Уніфікація термінів**: усі поняття мають бути чітко визначені, без неоднозначностей.
- **Спільне використання**: мова має бути використана у всіх сферах — від розмов до коду.

### Розвиток єдиного мови

- Це **безперервний процес** — мова має еволюціонувати разом з проектом.
- **Залучення інструментів**:
  - Глосарії на основі вікі-сторінок.
  - Gherkin-тести для документування.

### Підсумок

Єдиний мова — це не просто термінологія. Це основа для **ефективного спілкування** та **взаємодії** на всіх етапах проекту.

---

## Як осмислити складність предметної області

### Протиріччя в моделях 
**Приклад: телемаркетингова компанія** 
Розглянемо ситуацію з телемаркетинговою компанією: 
- **Маркетинговий відділ**  залучає потенційних клієнтів через онлайн-рекламу.
- **Відділ продажів**  працює з потенційними клієнтами, щоб перетворити їх на покупців.
![](/images/2.png)
На рис. показано послідовність процесу.

**Проблема** 
При аналізі мови експертів предметної області з'являється дивна особливість:
термін «лід» (lead) в маркетинговому відділі та відділі продажів має різні значення: 
1. **Маркетинговий відділ** 
  - Для маркетологів «лід» — це подія отримання контактної інформації потенційного клієнта.
  - Простий опис: **"Хтось проявив інтерес"** .
 
2. **Відділ продажів** 
  - Для продавців «лід» — це весь життєвий цикл взаємодії з клієнтом.
  - Це складний процес, який включає багато етапів.

**Виникає питання:**  як створити єдину мову для компанії?

---


### Виклик 
 
- **Єдина мова**  має бути позбавлена протиріч: у кожного терміну має бути одне значення.
- Але ментальні моделі експертів у відділах маркетингу та продажів суттєво різняться.

**На практиці:** 
- Люди легко розуміють значення терміну «лід» із контексту розмови.
- Але у вихідному коді така неоднозначність може стати причиною помилок.

**Спроби вирішення:**  
1. **Модель продажів у маркетингу:** 
  - Надлишок деталей, які не потрібні для оптимізації рекламних кампаній.
 
2. **Модель маркетингу у продажах:** 
  - Занадто спрощений підхід, що не відповідає вимогам продажів.

У першому випадку виникає зайва складність, а в другому — втрата важливої інформації.


---


### Рішення 
 
1. **Універсальна модель** 
  - Традиційний підхід — створення єдиної моделі для всіх задач.
  - Але такі моделі часто стають надто громіздкими (рис. 3.2).
  - Проблеми:
    - Зайві деталі.
    - Складність пошуку потрібної інформації.
    - Підтримання непротирічності даних.
 
2. **Додавання префіксів** 
  - Наприклад: «маркетинговий лід» і «продажний лід».
  - Недоліки: 
    - **Когнітивне навантаження:**  яку модель використовувати в конкретному випадку?
    - **Невідповідність єдиній мові:**  у розмовах люди не використовують префікси, покладаючись на контекст.
 
3. **Паттерн обмеженого контексту (Bounded Context)** 
  - Використання окремих контекстів для маркетингового та продажного лідів.
  - Цей підхід дозволяє створювати незалежні моделі для кожного піддомена, зменшуючи кількість конфліктів.

![](/images/3.png)

Далі ми детально розглянемо, як працює паттерн **обмеженого контексту**  та які вигоди він приносить у розробці програмного забезпечення.
